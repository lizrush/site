<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.e11beeda69cebe3285c1.css">.styles-module--pink--3ucK1,.styles-module--yellow--33LtV{-webkit-transition:background-size .4s ease;transition:background-size .4s ease;padding-bottom:inherit}.styles-module--pink--3ucK1:hover,.styles-module--yellow--33LtV:hover{background-size:100% 100%}.styles-module--pink--3ucK1{background:-webkit-gradient(linear,left top,left bottom,color-stop(49%,transparent),color-stop(0,rgba(255,135,207,.35))) bottom/90% 100% no-repeat;background:linear-gradient(180deg,transparent 49%,rgba(255,135,207,.35) 0) bottom/90% 100% no-repeat}.styles-module--yellow--33LtV{background:-webkit-gradient(linear,left top,left bottom,color-stop(49%,transparent),color-stop(0,rgba(248,237,67,.5))) bottom/90% 100% no-repeat;background:linear-gradient(180deg,transparent 49%,rgba(248,237,67,.5) 0) bottom/90% 100% no-repeat}html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.45em georgia,serif;box-sizing:border-box;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{color:rgba(0,0,0,.8);font-family:georgia,serif;font-weight:400;word-wrap:break-word;-webkit-font-kerning:normal;font-kerning:normal;-ms-font-feature-settings:"kern","liga","clig","calt";-webkit-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt"}img{max-width:100%;padding:0;margin:0 0 1.45rem}h1{font-size:2.25rem}h1,h2{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h2{font-size:1.62671rem}h3{font-size:1.38316rem}h3,h4{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h4{font-size:1rem}h5{font-size:.85028rem}h5,h6{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h6{font-size:.78405rem}hgroup{padding:0;margin:0 0 1.45rem}ol,ul{padding:0;margin:0 0 1.45rem 1.45rem;list-style-position:outside;list-style-image:none}dd,dl,figure,p{padding:0;margin:0 0 1.45rem}pre{margin:0 0 1.45rem;font-size:.85rem;line-height:1.42;background:rgba(0,0,0,.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.45rem}table{font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%}fieldset,table{padding:0;margin:0 0 1.45rem}blockquote{padding:0;margin:0 1.45rem 1.45rem}form,iframe,noscript{padding:0;margin:0 0 1.45rem}hr{padding:0;margin:0 0 calc(1.45rem - 1px);background:rgba(0,0,0,.2);border:none;height:1px}address{padding:0;margin:0 0 1.45rem}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-left:1.45rem;margin-bottom:.725rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code,kbd,samp{font-size:.85rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:SFMono-Regular,Consolas,Roboto Mono,Droid Sans Mono,Liberation Mono,Menlo,Courier,monospace;padding:.2em 0}pre code{background:none;line-height:1.42}code:after,code:before,tt:after,tt:before{letter-spacing:-.2em;content:" "}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}@media only screen and (max-width:480px){html{font-size:100%}}body{font-family:EF-Regular,sans-serif}h1,h2,h3,h4,h5{font-family:EF-Bold,sans-serif}p{padding-bottom:.2em}a{text-decoration:none;color:inherit;font-family:EF-Bold,sans-serif;font-weight:700}@font-face{font-family:EF-Regular;src:url(/static/EF-Regular-8efec77bf8c2e05a91a088d255caea34.woff2) format("woff2"),url(/static/EF-Regular-d247d6fd48bb59b7a1d252b22494a78f.woff) format("woff");font-weight:400;font-style:normal}@font-face{font-family:EF-Bold;src:url(/static/EF-Bold-34dc6328b1f82b3e1078f64385e6ddfd.otf) format("otf");font-weight:700;font-style:normal}@font-face{font-family:EF-Light;src:url(/static/EF-Light-5b56c8c127d9b2fccfa1f04202c6c371.otf) format("otf");font-weight:lighter;font-style:normal}.styles-module--pink--3hxlU,.styles-module--yellow--3w-PT{font-weight:700;text-transform:uppercase}.styles-module--pink--3hxlU{color:#ff87cf}.styles-module--yellow--3w-PT{color:#f8ed43}.blog-module--post--1jMia h3{margin-top:.15rem}.blog-module--post--1jMia .blog-module--pinkUnderline--xRmG9{background:-webkit-gradient(linear,left top,left bottom,color-stop(60%,transparent),color-stop(0,rgba(255,135,207,.35))) 0 100%/0 100% no-repeat;background:linear-gradient(180deg,transparent 60%,rgba(255,135,207,.35) 0) 0 100%/0 100% no-repeat}.blog-module--post--1jMia .blog-module--yellowHighlight--NXoog{background:-webkit-gradient(linear,left top,left bottom,color-stop(60%,transparent),color-stop(0,rgba(248,237,67,.75))) 0 100%/0 100% no-repeat;background:linear-gradient(180deg,transparent 60%,rgba(248,237,67,.75) 0) 0 100%/0 100% no-repeat}.blog-module--post--1jMia:hover .blog-module--pinkUnderline--xRmG9,.blog-module--post--1jMia:hover .blog-module--yellowHighlight--NXoog{background-size:100% 100%}.blog-module--post--1jMia:first-of-type{margin-top:1em}.blog-module--post--1jMia .blog-module--pinkUnderline--xRmG9,.blog-module--post--1jMia .blog-module--yellowHighlight--NXoog{-webkit-transition:background-size .7s ease;transition:background-size .7s ease;padding-bottom:inherit}.styles-module--horizontalStarLine--1PONS,.styles-module--star--2_88R,.styles-module--tinyStar--2o8L8,.styles-module--verticalStarLine--1-zZg{position:absolute;overflow:hidden}.styles-module--animator--10qBb{position:fixed;height:100vh;width:100vw;overflow:hidden;top:0;left:0;z-index:-1}.styles-module--star--2_88R{height:5px;width:5px}.styles-module--horizontalStarLine--1PONS{height:1px;left:0;top:2px;width:5px}.styles-module--verticalStarLine--1-zZg{height:5px;left:2px;top:0;width:1px}.styles-module--toggleButton--1FdMV{height:100%;border-color:transparent}.styles-module--sparkles--383CT{display:inline;grid-area:sparkles;justify-self:end;font-size:4.5em}.styles-module--toggleOff--gs263,.styles-module--toggleOn--3WRZB{border-color:transparent;-webkit-transition:-webkit-filter .67s ease-in;transition:-webkit-filter .67s ease-in;transition:filter .67s ease-in;transition:filter .67s ease-in,-webkit-filter .67s ease-in;background-color:transparent}.styles-module--toggleOff--gs263:focus,.styles-module--toggleOn--3WRZB:focus{outline:none}.styles-module--toggleOff--gs263{-webkit-filter:grayscale(100%);filter:grayscale(100%);-webkit-transition:none;transition:none}.index-module--gridContainer--r_z84{display:grid;grid-template-columns:1fr;grid-template-rows:.25fr 1fr;grid-template-areas:"headshot" "content";grid-column-gap:1rem;grid-row-gap:1rem}.index-module--imageCropper--1XQJW{width:120px;height:120px;overflow:hidden;border-radius:50%;grid-area:headshot;border:1px solid hsla(0,0%,82.7%,.71);box-shadow:0 1px 15px 0 rgba(0,0,0,.2);justify-self:center}@media (pointer:fine){.index-module--imageCropper--1XQJW{z-index:-2}}.index-module--content--1f4nN{grid-area:content;justify-content:stretch}@media (min-width:500px){.index-module--gridContainer--r_z84{grid-template-columns:.3fr 1fr;grid-template-rows:.25fr 1fr;grid-template-areas:". sparkles" "headshot content"}.index-module--imageCropper--1XQJW{width:180px;height:180px}}</style><meta name="generator" content="Gatsby 2.9.2"/><title data-react-helmet="true">Plotting coordinates: a simple gon gem tutorial | Liz Rush</title><meta data-react-helmet="true" name="description" content="this is Liz Rush&#x27;s personal website"/><meta data-react-helmet="true" property="og:title" content="Plotting coordinates: a simple gon gem tutorial"/><meta data-react-helmet="true" property="og:description" content="this is Liz Rush&#x27;s personal website"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@lizmrush"/><meta data-react-helmet="true" name="twitter:title" content="Plotting coordinates: a simple gon gem tutorial"/><meta data-react-helmet="true" name="twitter:description" content="this is Liz Rush&#x27;s personal website"/><meta data-react-helmet="true" name="keywords" content="Plotting coordinates: a simple gon gem tutorial, liz rush, blog"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png"/><link as="script" rel="preload" href="/webpack-runtime-14e4989b5d22344eb19c.js"/><link as="script" rel="preload" href="/app-8f8b60578ca195e6dd87.js"/><link as="script" rel="preload" href="/styles-c895df78d82db7b9529d.js"/><link as="script" rel="preload" href="/1-e890a32bdfa38883c880.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-template-blog-post-template-js-93dd82581df70b2c7ded.js"/><link as="fetch" rel="preload" href="/page-data/how-to-plot-coordinates-on-a-map-with-rails-and-the-google-maps-javascript-api/page-data.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div style="margin:0 auto;max-width:960px;padding:2.45rem 1.5rem"><div class="blog-post-container"><div class="blog-post"><h1>Plotting coordinates: a simple gon gem tutorial</h1><h2>February 03, 2014</h2><div class="blog-post-content"><p><strong>How to plot coordinates on a map with Rails and the Google Maps JavaScript API</strong></p>
<p>This tutorial will walk a rails beginner through the process of how to plot coordinates on a google map. This method is quick and easy, and will be relatively pain free.</p>
<p><strong>Setup:</strong></p>
<p>First, add the gem <a href="https://github.com/gazay/gon">gon</a> to your gemfile:</p>
<p><img src="/content/images/2014/Jul/gemfile.png" alt="gemfile"></p>
<p>What does gon do for you?</p>
<ul>
<li>
<p>It allows you to write data in your controller (or presenter or model) to a variable</p>
</li>
<li>
<p>You can use the variable in your view by using data attributes to assign it to an object or by using javascript in the view.</p>
</li>
<li>
<p>Then you can use the data in your javascript.</p>
</li>
</ul>
<p>Find out more about using gon and passing data to javascript in <a href="http://railscasts.com/episodes/324-passing-data-to-javascript">this railscast.</a></p>
<p>(You'll see that I have included the awesome gem <a href="http://www.rubygeocoder.com">geocoder</a>. I used this gem to retrieve the coordinates of a visitor to my app via their IP addesss.)</p>
<p>Then be sure to bundle install after adding the gems to your gemfile.</p>
<p><strong>Using gon:</strong></p>
<p>Using gon is the simplest thing in the world. You merely assign some data to a variable with "gon."" as a prefix in your controller.</p>
<p><img src="/content/images/2014/Jul/gonvariable.png" alt="gon.lat_long_array as a variable set in the controller"></p>
<p>As you can see, I used the same format as I did for the instance variables I will use in my view, only replacing the '@' with 'gon'.</p>
<p>In the Visitors model, I use the geocoder gem to assign latitude and longitude values to the object before saving to the database.</p>
<p>The geocoder documentation explains this well, but in order to plot these two separate values as one marker, we are going to want to have them as an array of arrays for each entry, like this: [[lat, long], [lat, long], [lat, long]...].</p>
<p><img src="/content/images/2014/Jul/coordinatemethod.png" alt="method for lat long array"></p>
<p>As you can see, I am plucking out the latitude and longitude values of all Visitors and assigning those resulting arrays to varibles. Then I use the zip method to turn it into the array of arrays I need. Before returning the variable, be sure to delete any of the arrays if they include nil or a coordinate of "0.0".</p>
<p>This is sort of a long method; if I were to refactor it, I would probably start by moving the delete_ifs out to a separate method since their concerns are different from the previous lines that query the database.</p>
<p><strong>Now we're ready for javascript!</strong></p>
<p>We are going to use the <a href="https://developers.google.com/maps/documentation/javascript/">google maps javascript api</a> to plot our set of coordinates. You can find code samples in the offical documentation, but below is what I did:</p>
<p><img src="/content/images/2014/Jul/javascript.png" alt="google maps javascript"></p>
<p>You can see on line 11 where I bring in the latitude and longitude array. I simply assign it to a variable in javascript so I can use it. To drop a pin, you have to create a new Marker object (line 16), which is where you will include options like animation and position. Because I was interested in plotting several pins on the map at the same time from that array of coordinates, I made a simple for loop to create all the individual markers.</p>
<p>Here's what it looks like on the page:</p>
<p><img src="/content/images/2014/Jul/mapplots.png" alt="google map with pin drops"></p>
<p>Of course, depending on your use, you will probably want to change the map options to create a custom map for what you are doing. You can find out how to do such a thing in the google javascript api docs, which will also explain how to change the types of Markers (pins) or other options you have for your new map with plotted coordinates!</p>
<p>You can see this in action, along with my first attempts to use the canvas element over at <a href="http://liz-newsletter.herokuapp.com/visitors">liz-newsletter.herokuapp.com</a>, my Ada winter break project.</p></div></div></div><a class="styles-module--pink--3hxlU" href="/blog">⟵ back</a></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/how-to-plot-coordinates-on-a-map-with-rails-and-the-google-maps-javascript-api/";window.webpackCompilationHash="5b118537e77322267add";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-8f8b60578ca195e6dd87.js"],"component---src-templates-blog-post-template-blog-post-template-js":["/component---src-templates-blog-post-template-blog-post-template-js-93dd82581df70b2c7ded.js"],"component---src-pages-404-js":["/component---src-pages-404-js-3d94a56f8fdc62b2917b.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js-28e7f372855bc52986fe.js"],"component---src-pages-index-js":["/component---src-pages-index-js-c6bb0bf7d78b39ba8a6b.js"]};/*]]>*/</script><script src="/component---src-templates-blog-post-template-blog-post-template-js-93dd82581df70b2c7ded.js" async=""></script><script src="/1-e890a32bdfa38883c880.js" async=""></script><script src="/styles-c895df78d82db7b9529d.js" async=""></script><script src="/app-8f8b60578ca195e6dd87.js" async=""></script><script src="/webpack-runtime-14e4989b5d22344eb19c.js" async=""></script></body></html>